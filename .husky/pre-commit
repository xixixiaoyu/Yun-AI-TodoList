#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "🔍 运行 pre-commit 质量检查..."

# 1. 首先运行完整的质量检查和修复
echo "📋 运行完整质量检查..."
if ! pnpm run quality:fix; then
    echo "❌ 质量检查失败，请修复问题后重新提交"
    exit 1
fi

# 2. 然后运行 lint-staged 处理暂存文件
echo "🎨 处理暂存文件..."
pnpm lint-staged

echo "✅ Pre-commit 检查完成！"
