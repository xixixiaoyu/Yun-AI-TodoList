#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸ” è¿è¡Œ pre-commit è´¨é‡æ£€æŸ¥..."

# 1. é¦–å…ˆè¿è¡Œå®Œæ•´çš„è´¨é‡æ£€æŸ¥å’Œä¿®å¤
echo "ğŸ“‹ è¿è¡Œå®Œæ•´è´¨é‡æ£€æŸ¥..."
if ! pnpm run quality:fix; then
    echo "âŒ è´¨é‡æ£€æŸ¥å¤±è´¥ï¼Œè¯·ä¿®å¤é—®é¢˜åé‡æ–°æäº¤"
    exit 1
fi

# 2. ç„¶åè¿è¡Œ lint-staged å¤„ç†æš‚å­˜æ–‡ä»¶
echo "ğŸ¨ å¤„ç†æš‚å­˜æ–‡ä»¶..."
pnpm lint-staged

echo "âœ… Pre-commit æ£€æŸ¥å®Œæˆï¼"
